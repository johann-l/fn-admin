<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net">
  <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet">
  <title>FleetNow</title>
  <link rel="stylesheet" href="../css/style.css">
</head>

<body style="margin: 0; font-family: 'Inter', sans-serif; background-color: #d9d5d5;">
  <div class="top-bar">
    <a href="index.html" class="square" style="margin: auto 1rem">Dashboard</a>
    <a href="#" class="square" style="margin: auto 1rem">Live Tracking</a>
    <a href="#" class="square"
      style="margin: auto 1rem; cursor:default; background-color: rgb(137, 149, 145);">Reports</a>
    <p class="square" style="margin: auto 14rem auto auto;">... 4 ...</p>
  </div>

  <div class="layout">
    <h1 class="logo">FleetNow</h1>
    <aside class="sidebar">
      <ul style="padding-top: 50%; font-family: Poppins,sans-serif;font-size: x-large;">
        <li>Notifications</li>
        <li style="padding: 2rem 0;">Main boards
          <ul style="font-size: large;">
            <li>Drivers board</li>
            <li>Passenger board</li>
          </ul>
        </li>
        <li style="padding: 2rem 0;">Manage
          <ul style="font-size: large;">
            <li>Drivers</li>
            <li>Passengers</li>
            <li>Routes</li>
            <li>Documents</li>
            <li>Payments</li>
          </ul>
        </li>
      </ul>
    </aside>

    <div class="content">
      <main class="main">
        <h2>Reports</h2>
        <div style="display: inline-flex; flex-wrap: wrap; margin-left: 1.3rem;">
          <div style="display: inline-block; flex-wrap: wrap; margin-right: 3rem;">
            <div class="report-container">
              <h3>Total Expenses</h3>
              <div style=" padding-left: 1rem;">
                <h2>₹<span id="totalval">0</span></h2>
                <p>Expense Allocation</p>
                <div id="graph-bar">
                  <div id="bar1"></div>
                  <div id="bar2"></div>
                  <div id="bar3"></div>
                  <div id="bar4"></div>
                </div>
                <ul class="expense-divisions" style="display: flex; flex-wrap: wrap; column-gap: 3rem;">
                  <li id="exp1">
                    <p>Fuel</p>
                    <p>₹<span id="1val">250</span></p>
                  </li>
                  <li id="exp2">
                    <p>Highway</p>
                    <p>₹<span id="2val">250</span></p>
                  </li>
                  <li id="exp3">
                    <p>Services</p>
                    <p>₹<span id="3val">250</span></p>
                  </li>
                  <li id="exp4">
                    <p>Misc</p>
                    <p>₹<span id="4val">250</span></p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="report-container">
              <h3>Vehicles</h3>
              <div style="display: inline-flex; padding-left: 1rem;">
                <canvas id="pieChart"></canvas>

                <table style="margin-left: 3rem; padding-right: 0rem;">
                  <tr>
                    <td>
                      <div class="square">
                        <ul>
                          <li>Bus No 1</li>
                        </ul>
                        <p id="bus1">₹3000</p>
                      </div>
                    </td>
                    <td>
                      <div class="square">
                        <ul>
                          <li>Bus No 2</li>
                        </ul>
                        <p id="bus2">₹5000</p>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="square">
                        <ul>
                          <li>Bus No 3</li>
                        </ul>
                        <p id="bus3">₹2000</p>
                      </div>
                    </td>
                    <td>
                      <div class="square">
                        <ul>
                          <li>Bus No 4</li>
                        </ul>
                        <p id="bus4">₹1000</p>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div style="margin-left: 0rem;">
            <div class="trans-hist">
              <h3>Transaction History</h3>
              <div
                style="max-height: 2.7rem; overflow-y: scroll; display: flex; flex-direction: column; gap:1; padding-bottom: 85.4%;">
                <div class="square" style="display: inline-flex; box-shadow: none; margin:0.5rem 0.5rem 0.2rem 0.7rem;">
                  <img src="indianoil.png" alt="IndianOil" style="width: 60px; padding: 0.1rem 3rem 0.1rem 0rem;">
                  <div style="margin-right: 3rem; margin-left: 0rem;">
                    <strong>Bus number 7</strong><br>
                    Fuel: 12 Ltrs &nbsp;&nbsp; Fuel rate: ₹100/-<br>
                    <small>27 February 2025</small>
                  </div>
                  <div style="top:0; right: 0; position: relative; font-weight:bold;">₹1,200.00</div>
                </div>
                <div class="square" style="display: inline-flex; box-shadow: none; margin:0.5rem 0.5rem 0.2rem 0.7rem;">
                  <img src="indianoil.png" alt="IndianOil" style="width: 60px; padding: 0.1rem 3rem 0.1rem 0rem;">
                  <div style="margin-right: 3rem; margin-left: 0rem;">
                    <strong>Bus number 7</strong><br>
                    Fuel: 12 Ltrs &nbsp;&nbsp; Fuel rate: ₹100/-<br>
                    <small>27 February 2025</small>
                  </div>
                  <div style="top:0; right: 0; position: relative; font-weight:bold;">₹1,200.00</div>
                </div>
              </div>
            </div>
          </div>
      </main>
    </div>

  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    const var1 = parseFloat(document.getElementById("1val").innerText);
    const var2 = parseFloat(document.getElementById("2val").innerText);
    const var3 = parseFloat(document.getElementById("3val").innerText);
    const var4 = parseFloat(document.getElementById("4val").innerText);

    const totalval = var1 + var2 + var3 + var4;
    document.getElementById("totalval").innerText = totalval;

    const percent = val => totalval > 0 ? (val / totalval) * 100 : 0;

    document.getElementById("bar1").style.width = percent(var1) + "%";
    document.getElementById("bar2").style.width = percent(var2) + "%";
    document.getElementById("bar3").style.width = percent(var3) + "%";
    document.getElementById("bar4").style.width = percent(var4) + "%";

    const expenses = [
      { bus: 'Bus No 1', amount: 3000 },
      { bus: 'Bus No 2', amount: 5000 },
      { bus: 'Bus No 3', amount: 2000 },
      { bus: 'Bus No 4', amount: 1000 }
    ];

    const ctx = document.getElementById('pieChart').getContext('2d');
    const pieChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: expenses.map(e => e.bus),
        datasets: [{
          data: expenses.map(e => e.amount),
          backgroundColor: ['#c70000', '#45acce', 'orange', '#9ccc65']
        }]
      },
      options: {
        responsive: false,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });
  </script>

</body>

</html>